<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Printing · Arblib.jl</title><meta name="title" content="Printing · Arblib.jl"/><meta property="og:title" content="Printing · Arblib.jl"/><meta property="twitter:title" content="Printing · Arblib.jl"/><meta name="description" content="Documentation for Arblib.jl."/><meta property="og:description" content="Documentation for Arblib.jl."/><meta property="twitter:description" content="Documentation for Arblib.jl."/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">Arblib.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Arblib.jl Documentation</a></li><li><span class="tocitem">Low level wrapper</span><ul><li><a class="tocitem" href="../wrapper-types/">Types</a></li><li><a class="tocitem" href="../wrapper-methods/">Methods</a></li><li><a class="tocitem" href="../wrapper-fpwrap/">Floating point wrapper</a></li></ul></li><li><span class="tocitem">High level interface</span><ul><li><a class="tocitem" href="../interface-types/">Types</a></li><li><a class="tocitem" href="../interface-ball/">Ball methods</a></li><li><a class="tocitem" href="../interface-integration/">Integration</a></li><li><a class="tocitem" href="../interface-series/">Series</a></li><li><a class="tocitem" href="../interface-mutable/">Mutable arithmetic</a></li><li><a class="tocitem" href="../precision/">Precision</a></li><li class="is-active"><a class="tocitem" href>Printing</a><ul class="internal"><li class="toplevel"><a class="tocitem" href="#Serialization"><span>Serialization</span></a></li><li><a class="tocitem" href="#API"><span>API</span></a></li></ul></li></ul></li><li><a class="tocitem" href="../rigorous/">Rigorous numerics</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">High level interface</a></li><li class="is-active"><a href>Printing</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Printing</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/kalmarek/Arblib.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/kalmarek/Arblib.jl/blob/master/docs/src/printing.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Printing"><a class="docs-heading-anchor" href="#Printing">Printing</a><a id="Printing-1"></a><a class="docs-heading-anchor-permalink" href="#Printing" title="Permalink"></a></h1><p>The task of printing an <a href="../interface-types/#Arblib.Arb"><code>Arb</code></a> value in a human readable format is surprisingly tricky. See for example the issues <a href="https://github.com/kalmarek/Arblib.jl/issues/84">#84</a>, <a href="https://github.com/kalmarek/Arblib.jl/issues/208">#208</a> and <a href="https://github.com/kalmarek/Arblib.jl/issues/217">#217</a> which all are examples of confusions coming from the way <a href="../interface-types/#Arblib.Arb"><code>Arb</code></a> values are printed by default.</p><div class="admonition is-info" id="Note-76ed017f2532cbcb"><header class="admonition-header">Note<a class="admonition-anchor" href="#Note-76ed017f2532cbcb" title="Permalink"></a></header><div class="admonition-body"><p>The main source of confusion is the convention that, by default, the output is rounded so that <strong>the printed midpoint is correct to within 1 ulp (unit in the last decimal place)</strong>. Compare</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; Arb(π, prec = 64)</code><code class="nohighlight hljs ansi" style="display:block;">[3.141592653589793239 +/- 5.96e-19]</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; Arb(π, prec = 128)</code><code class="nohighlight hljs ansi" style="display:block;">[3.1415926535897932384626433832795028842 +/- 1.06e-38]</code></pre><p>to</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; string(Arb(π, prec = 64), digits = 37, more = true)</code><code class="nohighlight hljs ansi" style="display:block;">&quot;[3.141592653589793238512808959406186204 +/- 1.09e-19]&quot;</code></pre><p>While in all cases the output is correct, in the sense that the printed enclosure indeed is an enclosure of <span>$\pi$</span>. In the latter example though we forced Arb to print more digits of the midpoint that are not in the actual value for <span>$\pi$</span>.</p></div></div><p>This convention of rounding the output to be correct within 1 ulp can give confusing behavior when the radius is too large for even the first digit to be known to 1 ulp. In this case, no digits of the midpoints are printed and instead the value is printed in the format <code>[+/- R]</code> where <code>R</code> is an upper bound for the absolute value of the input. As above, the <code>more</code> argument to <a href="#Base.string"><code>string</code></a> can then be used to print more (possibly incorrect) digits.</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; x = setball(Arb, 5, 2) # The interval is too wide to know the first digit to 1 ulp</code><code class="nohighlight hljs ansi" style="display:block;">[+/- 7.01]</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; string(x, more = true)</code><code class="nohighlight hljs ansi" style="display:block;">&quot;[5.0000000000000000000000000000000000000000000000000000000000000000000000000000 +/- 2.01]&quot;</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; string(x, digits = 5, more = true)</code><code class="nohighlight hljs ansi" style="display:block;">&quot;[5.0000 +/- 2.01]&quot;</code></pre><p>In general the radius in the printed value will be larger than the actual value. This effect is particularly noticeable for wide values, but occurs otherwise as well. The effect is reduced by printing more (possibly incorrect) digits, but still persists (in part because the radius is rounded to 2 digits in the printing). For example we can consider the printed radius for an enclosure of <span>$\pi$</span>.</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; x = Arb(π, prec = 64)</code><code class="nohighlight hljs ansi" style="display:block;">[3.141592653589793239 +/- 5.96e-19]</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; string(x, digits = 50, more = true)</code><code class="nohighlight hljs ansi" style="display:block;">&quot;[3.1415926535897932385128089594061862044327426701784 +/- 1.09e-19]&quot;</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; radius(x)</code><code class="nohighlight hljs ansi" style="display:block;">1.08420217e-19</code></pre><p>Even for exact values the radius is printed if the number of digits requested is not enough to represent the value exactly.</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; x = 1 / Arb(2^55, prec = 64) # Set x to the exact value 2^-55</code><code class="nohighlight hljs ansi" style="display:block;">[2.775557561562891351e-17 +/- 5.91e-37]</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; Arblib.isexact(x) # The value is indeed exact, even though it is printed with a radius</code><code class="nohighlight hljs ansi" style="display:block;">true</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; string(x, digits = 39) # We need at least 39 digits to print the exact value</code><code class="nohighlight hljs ansi" style="display:block;">&quot;2.77555756156289135105907917022705078125e-17&quot;</code></pre><h1 id="Serialization"><a class="docs-heading-anchor" href="#Serialization">Serialization</a><a id="Serialization-1"></a><a class="docs-heading-anchor-permalink" href="#Serialization" title="Permalink"></a></h1><p>As apparent from the above discussion, printing an <a href="../interface-types/#Arblib.Arb"><code>Arb</code></a> value as a decimal string is a lossy operation. If you want to convert to a string as an intermediate representation, you can serialize the value using <a href="#Arblib.dump_string"><code>Arblib.dump_string</code></a>. The result can then be read back using <a href="#Arblib.load_string"><code>Arblib.load_string</code></a>.</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; x = Arb(π)</code><code class="nohighlight hljs ansi" style="display:block;">[3.1415926535897932384626433832795028841971693993751058209749445923078164062862 +/- 1.93e-77]</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; str = Arblib.dump_string(x)</code><code class="nohighlight hljs ansi" style="display:block;">&quot;6487ed5110b4611a62633145c06e0e68948127044533e63a0105df531d89cd91 -fd 1 -ff&quot;</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; y = Arblib.load_string(Arb, str)</code><code class="nohighlight hljs ansi" style="display:block;">[3.1415926535897932384626433832795028841971693993751058209749445923078164062862 +/- 1.93e-77]</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; isequal(x, y) # x and y are exactly the same</code><code class="nohighlight hljs ansi" style="display:block;">true</code></pre><h2 id="API"><a class="docs-heading-anchor" href="#API">API</a><a id="API-1"></a><a class="docs-heading-anchor-permalink" href="#API" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Base.string" href="#Base.string"><code>Base.string</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">string(x::ArbOrRef; digits, more, no_radius, condense, unicode, remove_trailing_zeros)</code></pre><p>Convert <code>x</code> to a decimal string. By default, this uses the midpoint-radius format &quot;[m ± r]&quot;.</p><p>With default flags, the output can be parsed back as <code>Arb(string(x))</code>, and this is guaranteed to produce an interval containing the original interval <code>x</code> (but is generally wider). For lossless, but not human readable, serialization as a string, see <a href="#Arblib.dump_string"><code>dump_string</code></a> and <a href="#Arblib.load_string"><code>load_string</code></a>.</p><p>By default, the output is rounded so that the value given for the midpoint is correct up to 1 ulp (unit in the last decimal place).</p><div class="admonition is-warning" id="Warning-3c79534c45ca2a3d"><header class="admonition-header">Warning<a class="admonition-anchor" href="#Warning-3c79534c45ca2a3d" title="Permalink"></a></header><div class="admonition-body"><p>The output can be confusing for wide inputs, when the radius is too large for even the first digit to be known up to 1 ulp. In this case the interval is printed in the format <code>[+/- R]</code> where <code>R</code> is an upper bound for the absolute value of <code>x</code>. The <code>more</code> keyword argument (see below) can then be used (possibly in combination with <code>digits</code>) to print more digits, which are however no longer guaranteed to be correct within 1 ulp.</p><pre><code class="language-julia-repl hljs">julia&gt; x = Arb((1, 2));

julia&gt; string(x)
&quot;[+/- 2.01]&quot;

julia&gt; string(x, more = true)
&quot;[1.5000000000000000000000000000000000000000000000000000000000000000000000000000 +/- 0.501]&quot;

julia&gt; string(x, digits = 5, more = true)
&quot;[1.5000 +/- 0.501]&quot;</code></pre><p>The <a href="../interface-ball/#Arblib.getball"><code>getball</code></a> and <a href="../interface-ball/#Arblib.getinterval"><code>getinterval</code></a> functions can also be useful in this case.</p></div></div><p><strong>Keyword Arguments</strong></p><ul><li><code>digits::Integer = digits_prec(precision(x))</code>: The number of digits to display.</li><li><code>more::Bool = false</code>: If <code>true</code>, display more (possibly incorrect) digits.</li><li><code>no_radius::Bool = false</code>: If <code>true</code>, the radius is not displayed in the output. Unless <code>more</code> is set, the output is rounded so that the midpoint is correct to 1 ulp. As a special case, if there are no significant digits after rounding, the result will be shown as <span>$0e+n$</span>, meaning that the result is between <span>$-1e+n$</span> and <span>$1e+n$</span> (following the contract that the output is correct to within one unit in the only shown digit).</li><li><code>condense::Integer = 0</code>: If non-zero, strings of more than three times <code>condense</code> consecutive digits are condensed, only printing the leading and trailing <code>condense</code> digits along with brackets indicating the number of digits omitted (useful when computing values to extremely high precision).</li><li><code>unicode::Bool = false</code>: If <code>true</code>, use unicode characters in the output, e.g., <code>±</code> instead of <code>+/-</code>.</li><li><code>remove_trailing_zeros::Bool = !no_radius</code>: If <code>true</code>, remove trailing zeros after the decimal point.</li></ul><p><strong>Examples</strong></p><pre><code class="language-julia-repl hljs">julia&gt; x = Arb(π, prec = 64);

julia&gt; string(x)
&quot;[3.141592653589793239 +/- 5.96e-19]&quot;

julia&gt; string(x; no_radius=true)
&quot;3.141592653589793239&quot;

julia&gt; y = Arb((1, 2), prec = 64);

julia&gt; string(y)
&quot;[+/- 2.01]&quot;

julia&gt; string(y, more = true)
&quot;[1.500000000000000000 +/- 0.501]&quot;

julia&gt; string(y, digits = 30, more = true)
&quot;[1.50000000000000000000000000000 +/- 0.501]&quot;

julia&gt; z = Arb(π, prec = 512);

julia&gt; string(z)
&quot;[3.141592653589793238462643383279502884197169399375105820974944592307816406286208998628034825342117067982148086513282306647093844609550582231725359408128481 +/- 2.99e-154]&quot;

julia&gt; string(z, condense = 2, unicode = true)
&quot;[3.14{…149 digits…}81 ± 2.99e-154]&quot;</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/kalmarek/Arblib.jl/blob/12a7062d0b71671d5f2306038789715715981ddc/src/show.jl#L74-L163">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Arblib.dump_string" href="#Arblib.dump_string"><code>Arblib.dump_string</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">dump_string(x::Union{MagLike,ArfLike,ArbLike})</code></pre><p>Return a serialized string representation of <code>x</code>.</p><p>The result can be read back in using <a href="#Arblib.load_string"><code>load_string</code></a>.</p><p>For human readable output, see <a href="#Base.string"><code>string</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/kalmarek/Arblib.jl/blob/12a7062d0b71671d5f2306038789715715981ddc/src/show.jl#L301-L309">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Arblib.load_string" href="#Arblib.load_string"><code>Arblib.load_string</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">load_string(T::Type{&lt;:Union{Mag,Arf,Arb}}, str::AbstractString)</code></pre><p>Parse a string <code>str</code> as outputted by <a href="#Arblib.dump_string"><code>dump_string</code></a> and return an identical new object of type <code>T</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/kalmarek/Arblib.jl/blob/12a7062d0b71671d5f2306038789715715981ddc/src/show.jl#L293-L298">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../precision/">« Precision</a><a class="docs-footer-nextpage" href="../rigorous/">Rigorous numerics »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.14.1 on <span class="colophon-date" title="Tuesday 5 August 2025 05:55">Tuesday 5 August 2025</span>. Using Julia version 1.11.6.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
